<!DOCTYPE html>
<html lang="en">

<!-- Basic -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Mobile Metas -->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Site Metas -->
<title>Group 4 - News</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">

<!-- Site Icons -->
<link rel="shortcut icon" href="../images/favicon.ico" type="../image/x-icon" />
<link rel="apple-touch-icon" href="../images/apple-touch-icon.png">

<!-- Design fonts -->
<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">

<!-- Bootstrap core CSS -->
<link href="../css/bootstrap.css" rel="stylesheet">

<!-- FontAwesome Icons core CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Custom styles for this template -->
<link href="../css/style.css" rel="stylesheet">

<!-- Responsive styles for this template -->
<link href="../css/responsive.css" rel="stylesheet">

<!-- Colors for this template -->
<link href="../css/colors.css" rel="stylesheet">

<!-- Version Tech CSS for this template -->
<link href="../css/version/tech.css" rel="stylesheet">

<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<style>
</style>
</head>

<body>

    <div id="wrapper">

        <header class="tech-header header">
            <div class="container-fluid">
                <nav class="navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse">
                    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                        data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <a class="navbar-brand" href="../tech-index.html"><img src="../images/version/tech-logo.png"
                            alt=""></a>
                    <div class="collapse navbar-collapse" id="navbarCollapse">
                        <ul id="categories" class="navbar-nav mr-auto">
                        </ul>

                        <div>
                            <!-- <li
                            class="nav-item dropdown has-submenu menu-large hidden-md-down hidden-sm-down hidden-xs-down"> -->
                            <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false"></a>
                                <ul class="dropdown-menu megamenu" aria-labelledby="dropdown01">
                                    <li>
                                        <div class="container">
                                            <div class="mega-menu-content">
                                                <div id="user-profile-location" class="tab" style="float: right;">
                                                </div>
                                            </div>
                                        </div>  
                                    </li>   
                                </ul>                       
                        </div>

                        </ul>
                    </div>
                </nav>
            </div><!-- end container-fluid -->
        </header><!-- end market-header -->
    </div><!-- end wrapper -->

    <!-- Core JavaScript
================================================== -->
    <script src="../js/slim_notifier.js"></script>
    <script src="../js/jquery.min.js"></script>
    <script src="../js/tether.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/custom.js"></script>
    <script>
        $(document).ready(() => {
            var token = localStorage.getItem("token")
            var userProfile = $("#user-profile-location")
            if (token !== null) {
                userProfile.append(
                    `<button class="tablinks_drop">
                        <a class="nav-link reg" href="./tech-user-profile.html">
                            <i class="fa-solid fa-user"></i> Profile
                        </a>
                    </button>
                    <button class="tablinks_drop">
                        <a id="logout-btn" class="nav-link reg" href="#">
                            <i class="fa-solid fa-right-from-bracket"></i> Log out
                        </a>
                    </button>`
                )
            } else {
                userProfile.append(
                    `<button class="tablinks_drop">
                        <a class="nav-link reg" href="./auth/login-form.html">
                            <i class="fa-solid fa-right-to-bracket"></i> Login
                        </a>
                    </button>
                    <button class="tablinks_drop">
                        <a class="nav-link reg" href="./auth/register-form.html">
                            <i class="fa-solid fa-right-to-bracket"></i> Sign up
                        </a>
                    </button>`
                )
            }

            $("#logout-btn").click(() => {
                localStorage.clear()
                window.location.href = "./tech-index.html"
            })

            var categories = $("#categories")

            $.ajax({
                url: "https://localhost:7065/api/Category/GetTop5Category",
                method: "GET",
                contentType: "application/json",
                success: function (response) {
                    categories.append(
                        `<li class="nav-item">
                            <a class="nav-link" href="../tech-index.html">Home</a>
                        </li>`
                    )
                    categories.append(
                        response.map((cate) => (
                            `<li class="nav-item">
                                <a class="nav-link" href="../category/tech-category-01.html?cateId=${cate.id}">${cate.name}</a>
                            </li>`
                        ))
                    )
                    categories.append(
                        `<li class="nav-item">
                            <a class="nav-link" href="../category/tech-category-01.html">Kh√°c</a>
                        </li>`
                    )
                },
                error: function (xhr, status, error) {
                    SlimNotifierJs.notification('error', 'Error', xhr.responseText, 3000)
                },
            })


        })
    </script>
</body>

</html>